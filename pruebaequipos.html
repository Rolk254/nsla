<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NSLA-Equipos</title>
    <link rel="stylesheet" href="estilos/styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    <link rel="icon" type="image/x-icon" href="imagenes/logos/nofondo.png">
</head>

<body>
    <header>
        <div class="left-section">
            <a href="../index.html"><img style="margin-left: 20%;" src="../imagenes/logos/nofondo2.png" alt=""></a>
        </div>
        <div class="togglearea">
            <label for="toggle">
                <span></span>
                <span></span>
                <span></span>
            </label>
        </div>
        <input type="checkbox" id="toggle">
        <div class="navbar">
            <a href="../index.html">Inicio</a>
            <a href="calendario.html">Calendario</a>
            <a href="clasificacion.html">Clasificación</a>
            <a id="active" href="equipos.html">Equipos</a>
            <a href="noticias.html">Noticias</a>
            <a href="contacto.html">Contacto</a>
        </div>
    </header>

    <section>
      <!-- Contenedor para los equipos -->
      <div class="divequipos" id="equipos-container"></div>

      <!-- Script para generar la estructura del details desde el XML -->
      <script>
          // Función para generar la estructura del details
          const generarDetails = (equipoData) => {
              const posiciones = Array.from(new Set(equipoData.jugadores.map(jugador => jugador.posicion)));
              
              return `
                  <details>
                      <summary class="toggle-summary">${equipoData.nombreEquipo}<span class="toggle-button">▶</span></summary>
                      <h1>Entrenador:</h1>
                      <div class="divjugadores">
                          <div>
                              <img class="fotoequipos" src="${equipoData.entrenadorImagen}" alt="${equipoData.entrenadorNombre}">
                          </div>
                          <div>
                              <p>${equipoData.entrenadorNombre}</p>
                          </div>
                      </div>
                      <hr>
                      <h1>Jugadores:</h1>
                      ${posiciones.map(posicion => `
                          <h4><u>${posicion}</u></h4>
                          <div class="divjugadores">
                              ${equipoData.jugadores
                                  .filter(jugador => jugador.posicion === posicion)
                                  .map(jugador => `
                                      <div class="equipo-container">
                                          <img class="fotoequipos" src="${jugador.imagen}" alt="${jugador.nombre}">
                                          <div class="divjugadores">
                                              <p>${jugador.nombre}</p>
                                          </div>
                                      </div>`).join('')}
                          </div>`).join('')}
                  </details>`;
          };

          const equiposContainer = document.getElementById("equipos-container");

          // Obtener datos de los equipos desde el archivo XML
          fetch('datos.xml')
              .then(response => response.text())
              .then(xmlString => {
                  // Convertir el XML en un objeto para facilitar su manipulación
                  const parser = new DOMParser();
                  const xmlDoc = parser.parseFromString(xmlString, 'application/xml');

                  // Extraer datos de los equipos
                  const equiposData = Array.from(xmlDoc.getElementsByTagName('cardinals')).map(equipo => {
                      const nombreEquipo = equipo.querySelector('nombre').textContent;
                      const entrenadorNombre = equipo.querySelector('entrenador nombre').textContent;
                      const entrenadorImagen = equipo.querySelector('entrenador imagen').textContent;

                      const jugadores = Array.from(equipo.querySelectorAll('jugador')).map(jugador => {
                          return {
                              nombre: jugador.querySelector('nombre').textContent,
                              posicion: jugador.getAttribute('posicion'),
                              imagen: jugador.querySelector('imagen').textContent
                          };
                      });

                      return { nombreEquipo, entrenadorNombre, entrenadorImagen, jugadores };
                  });

                  // Generar la estructura del details para cada equipo
                  equiposContainer.innerHTML = equiposData.map(equipoData => generarDetails(equipoData)).join('');
              })
              .catch(error => console.error('Error al obtener el archivo XML:', error));
      </script>
  </section>

    <footer class="footer">
        <div class="divfoot">
            <ul>
                <li><img src="../imagenes/logos/nofondo.png" alt="" style="width: 4%;"></li>
                <li>
                    <p>© 2023 NSLA Enterprises LLC. NSLA and the NSLA shield design are registered trademarks of the
                        National Football League.The team names, logos and uniform designs are registered trademarks of
                        the teams indicated. All other NSLA-related trademarks are trademarks of the National Football
                        League. NSLA footage © NSLA Productions LLC.</p>
                </li>
                <li class="terms">
                    <a href="privacidad.html">Política de Privacidad</a>
                    <a href="terminos.html">Terminos de Servicio</a>
                    <a href="">Terminos y Condiciones de Subscripción</a>
                    <a href="">Tus Ajustes de Privacidad</a>
                    <a href="">Ajustes de Cookies</a>
                </li>
            </ul>
        </div>
    </footer>
</body>

</html>
